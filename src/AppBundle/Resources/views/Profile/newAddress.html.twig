{% extends "AppBundle::profile.html.twig" %}

{% form_theme form 'bootstrap_3_layout.html.twig' %}

{% block content %}
  <h2 class="page-header">{% trans %}New address{%  endtrans %}</h2>
  {{ form_start(form) }}
  {{ form_widget(form) }}
  <button type="submit" class="btn btn-block btn-primary">{% trans %}Save{% endtrans %}</button>
  {{ form_end(form) }}
{% endblock %}

{% block scripts %}
  <script src="{{ asset('js/widgets/address-input.js') }}"></script>
  <script>
  function initMap() {
    new CoopCycle.AddressInput(document.querySelector('#address_streetAddress'), {
      elements: {
        latitude: document.querySelector('#address_latitude'),
        longitude: document.querySelector('#address_longitude'),
        postalCode: document.querySelector('#address_postalCode'),
        addressLocality: document.querySelector('#address_addressLocality')
      }
    })
  }
  </script>
  <script src="https://maps.googleapis.com/maps/api/js?key={{ google_api_key }}&libraries=places&callback=initMap"
  async defer></script>
{% endblock %}
